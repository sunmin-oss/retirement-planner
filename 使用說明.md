# 退休計畫試算器 - 快速啟動指南

## 🚀 三種啟動方式

### 方式 1：雙擊批次檔（最簡單，推薦）
直接雙擊執行：
```
d:\大學\退休計畫\啟動退休計畫試算器.bat
```
- 會自動開啟一個獨立視窗運行後端服務
- 自動開啟瀏覽器顯示前端頁面
- 關閉「退休計畫後端」視窗即可停止服務

### 方式 2：PowerShell 腳本
在檔案總管中對著檔案按右鍵 → **使用 PowerShell 執行**：
```
d:\大學\退休計畫\啟動退休計畫試算器.ps1
```
- 或在 PowerShell 中執行：
  ```powershell
  & "d:\大學\退休計畫\啟動退休計畫試算器.ps1"
  ```

### 方式 3：手動啟動（進階）
開啟 PowerShell，依序執行：
```powershell
# 1. 啟動後端
Set-Location -Path "d:\大學\退休計畫\retire-planner-server"
npm.cmd start

# 2. 開啟前端（另開一個 PowerShell 視窗）
Start-Process "d:\大學\退休計畫\retire-planner\index.html"
```

---

## ✅ 啟動後你會看到

1. **後端服務視窗**（CMD 或 PowerShell）
   - 顯示：`retire-planner-server running at http://localhost:5178`
   - 保持開啟，不要關閉

2. **瀏覽器自動開啟**
   - 顯示退休計畫試算器頁面
   - 包含輸入表單和試算功能

---

## 📋 使用步驟

### 快速試算（使用預設值）
1. 點擊「開始試算」按鈕
2. 查看結果：達標年數、圖表、每年明細

### 自動抓取歷史報酬率
1. 展開「資產假設（選填）」
2. 點「測試連線」確認後端正常（應顯示「連線正常」）
3. 調整年數（預設 10 年）
4. 點「依歷史近N年的CAGR自動帶入」
5. 系統會自動查詢並填入年化報酬率

### 歷史回測
1. 展開「歷史回測（選填）」
2. 輸入逐年報酬序列，例如：
   ```
   0050: 8, -12, 15, 5, 10, 7, -8, 12, 3, 6
   VT: 10, -5, 12, 8, 6, 9, -2, 11, 4, 7
   ```
3. 設定「歷史序列末端年份」（如 2025）
4. 點「開始試算」
5. 同時顯示「未來預測」和「歷史回測」結果

---

## 🛑 停止服務

- **批次檔啟動**：關閉「退休計畫後端」視窗
- **PowerShell 啟動**：在視窗按 `Ctrl + C`
- **手動啟動**：在運行 npm.cmd start 的視窗按 `Ctrl + C`

---

## ❗ 常見問題

### Q: 雙擊 .ps1 檔案無法執行？
**A:** 對檔案按右鍵 → 選擇「使用 PowerShell 執行」

### Q: 出現「Failed to fetch」錯誤？
**A:** 
1. 確認後端服務是否啟動（應看到 `running at http://localhost:5178`）
2. 在頁面點「測試連線」按鈕檢查
3. 如果未啟動，重新執行啟動腳本

### Q: 電腦重啟後需要重新啟動嗎？
**A:** 是的，每次重開機後需要重新雙擊 `啟動退休計畫試算器.bat`

### Q: 可以修改埠號嗎？
**A:** 可以編輯 `retire-planner-server/src/server.js`，修改第 5 行的 PORT 值

---

## 🎯 功能概覽

- ✅ 多資產配置試算（0050、VT、QQQ、0056、債券、現金）
- ✅ 每月定期定額 + 一次性加碼
- ✅ 自動查詢歷史年化報酬率（Yahoo Finance）
- ✅ 歷史回測與未來預測對照
- ✅ 視覺化圖表：總資產曲線、資產分布堆疊圖
- ✅ 年末自動再平衡
- ✅ 每年資產明細表

---

## 📞 需要協助？

如果遇到任何問題，請檢查：
1. Node.js 是否已安裝（執行 `node -v` 應顯示版本號）
2. 後端服務是否正在運行
3. 瀏覽器是否開啟前端頁面

祝你規劃順利！🎉
